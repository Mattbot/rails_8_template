#!/bin/bash

# Pre-push hook to run linter before pushing
echo "ğŸ” Running linter before push..."

# Run RuboCop
if ! bundle exec rubocop; then
    echo "âŒ RuboCop lint check failed. Please fix the issues before pushing."
    echo "ğŸ’¡ Tip: Run 'bundle exec rubocop -A' to auto-fix most issues."
    exit 1
fi

# TODO: Re-enable slim-lint after fixing template issues
# Run Slim-lint if slim files exist
# if find . -name "*.slim" -not -path "./tmp/*" -not -path "./vendor/*" | grep -q .; then
#     if ! bundle exec slim-lint app/views/; then
#         echo "âŒ Slim-lint check failed. Please fix the issues before pushing."
#         exit 1
#     fi
# fi

echo "âœ… All lint checks passed! Proceeding with push."
exit 0